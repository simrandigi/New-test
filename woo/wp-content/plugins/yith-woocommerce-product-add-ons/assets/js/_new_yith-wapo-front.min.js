!function(l){function a(e){var a;void 0!==e.data("replace-image")&&""!=e.data("replace-image")&&(a=e.data("replace-image"),e=".woocommerce-product-gallery .woocommerce-product-gallery__wrapper .woocommerce-product-gallery__image:first-child img",l(e=".yith_magnifier_zoom img, .yith_magnifier_zoom_magnifier").attr("src",a),l(e).attr("srcset",a),l(".yith_magnifier_zoom_magnifier").css("background-image","url("+a+")"),l("#yith_wapo_product_img").val(a))}function o(){l("form.cart .yith-wapo-addon.conditional_logic").each(function(){for(var e=!0,a=!1,t=(l(this).data("addon_id"),l(this).data("conditional_logic_display")),o=l(this).data("conditional_logic_display_if"),i=String(l(this).data("conditional_rule_addon")).split("|"),n=String(l(this).data("conditional_rule_addon_is")).split("|"),d=0;d<i.length;d++){var p,c=i[d].split("-"),r=!1,s=!1;"v"==c[0]?(console.log("VAR - "+l(".variation_id").val()),l(".variation_id").val()==c[2]&&(s=!0)):void 0!==c[1]?(s=l("#yith-wapo-"+c[0]+"-"+c[1]).is(":checked")||l("select#yith-wapo-"+c[0]).val()==c[1],p=l("input#yith-wapo-"+c[0]+"-"+c[1]).val(),c=l("textarea#yith-wapo-"+c[0]+"-"+c[1]).val(),r=void 0!==p&&""!==p||void 0!==c&&""!==c):s=0<l("#yith-wapo-addon-"+i[d]+" input:checkbox:checked").length||0<l("#yith-wapo-addon-"+i[d]+" input:radio:checked").length||0<l("#yith-wapo-addon-"+i[d]+" option:selected").length,"selected"==n[d]?s?a=!0:e=!1:"not-selected"==n[d]?s?e=!1:a=!0:"empty"==n[d]?r?e=!1:a=!0:"not-empty"==n[d]&&(r?a=!0:e=!1)}"all"==o&&e||"any"==o&&a?"show"==t?l(this).fadeIn():l(this).fadeOut():"show"==t?l(this).fadeOut():l(this).fadeIn()})}function i(e,o,i){l.ajax({url:ajaxurl,type:"POST",contentType:!1,processData:!1,data:e,success:function(e){l(".yith-wapo-ajax-uploader").hide();var a=parseFloat(o.size/1024/1024).toFixed(2)+" MB",t=e.replace(/^.*[\\\/]/,"");l(".yith-wapo-uploaded-file .info").html(t+"<br />"+a),l(".yith-wapo-uploaded-file").fadeIn(),i.parent().find("input.option").val(e).change(),console.log("success :"+e)},error:function(e){console.log("error :"+e)}})}function e(e){var a=e.data("min"),t=e.data("max"),o=e.data("exa"),i=e.find("input:checkbox:checked").length;0<o?o==i?(e.find("input:checkbox").attr("required",!1),e.find("input:checkbox").not(":checked").attr("disabled",!0)):(e.find("input:checkbox").attr("required",!0),e.find("input:checkbox").not(":checked").attr("disabled",!1)):(0<a&&(a<=i?e.find("input:checkbox").attr("required",!1):e.find("input:checkbox").attr("required",!0)),0<t&&(i<t?e.find("input:checkbox").not(":checked").attr("disabled",!1):e.find("input:checkbox").not(":checked").attr("disabled",!0)))}l("body").on("change",".yith-wapo-addon-type-checkbox input",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),l(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),a(e)):e.removeClass("selected")}),l("body").on("change",".yith-wapo-addon-type-color input",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),l(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),a(e)):(console.log("not checked"),e.find("input").prop("disabled",!0),e.removeClass("selected"))}),l("body").on("change",".yith-wapo-addon-type-label input",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),l(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),a(e)):e.removeClass("selected")}),l("body").on("change",".yith-wapo-addon-type-product input",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),l(this).is(":checked")?(e.addClass("selected"),e.hasClass("selection-single")&&(e.parent().find("input").prop("checked",!1),e.parent().find(".selected").removeClass("selected"),e.find("input").prop("checked",!0),e.addClass("selected")),a(e)):e.removeClass("selected")}),l("body").on("change",".yith-wapo-addon-type-radio input",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),l(this).is(":checked")?(e.addClass("selected"),a(e)):e.removeClass("selected")}),l("body").on("change",".yith-wapo-addon-type-select select",function(){var e=l(this).parent();e.hasClass("yith-wapo-option")||(e=e.parent()),a(l(this).find("option:selected"))}),l(".yith-wapo-addon.toggle h3").click(function(){l(this).parent().find(".options").toggle("fast"),l(document).trigger("yith_proteo_inizialize_html_elements")}),l(function(){o()}),l("form.cart .yith-wapo-addon").on("change","*",function(){o()}),l("form.cart").on("yith-wapo-reload-addons",function(e,a=""){l("#yith-wapo-container").css("opacity","0.5");var t={action:"live_print_blocks",addons:l("form.cart").serializeArray()};return""!=a&&(t.price=a),l.ajax({url:ajaxurl,type:"post",data:t,success:function(e){l("#yith-wapo-container").html(e),o(),l("#yith-wapo-container").css("opacity","1")}}),!1}),l("form.cart").on("change",".variations",function(){l("form.cart").trigger("yith-wapo-reload-addons")}),l("form.cart").on("change","#price_calculator",function(){var e=(e=l("#price_calculator .product_price .amount").text().replace(",",".")).replace(/[^0-9\.-]+/g,"");l("form.cart").trigger("yith-wapo-reload-addons",[e])}),l("html").on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),l("html").on("drop",function(e){e.preventDefault(),e.stopPropagation()}),l(".yith-wapo-ajax-uploader").on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),l(this).css("opacity","0.5")}),l(".yith-wapo-ajax-uploader").on("dragover",function(e){e.stopPropagation(),e.preventDefault()}),l(".yith-wapo-ajax-uploader").on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),l(this).css("opacity","1")}),l(".yith-wapo-ajax-uploader").on("drop",function(e){e.stopPropagation(),e.preventDefault();var a=l(this).parent().find("input.file"),t=e.originalEvent.dataTransfer.files[0],e=new FormData;e.append("action","upload_file"),e.append("file",t),wapo_upload_allowed_file_types.includes(t.name.split(".").pop())?t.size<=1024*wapo_upload_max_file_size*1024?i(e,t,a):alert("Error: max file size "+wapo_upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),l("#yith-wapo-container").on("click",".yith-wapo-ajax-uploader .button, .yith-wapo-ajax-uploader .link",function(){l(this).parent().parent().find("input.file").click()}),l("#yith-wapo-container").on("change",".yith-wapo-addon-type-file input.file",function(){var e=l(this),a=l(this)[0].files[0],t=new FormData;t.append("action","upload_file"),t.append("file",a),wapo_upload_allowed_file_types.includes(a.name.split(".").pop())?a.size<=1024*wapo_upload_max_file_size*1024?i(t,a,e):alert("Error: max file size "+wapo_upload_max_file_size+" MB!"):alert("Error: not supported extension!")}),l("#yith-wapo-container").on("click",".yith-wapo-uploaded-file .remove",function(){l(this).parent().hide(),l(this).parent().parent().find(".yith-wapo-ajax-uploader").fadeIn(),l(this).parent().parent().find("input").val(""),l(this).parent().parent().find("input.option").change()}),l("form.cart").on("click","span.checkboxbutton",function(){l(this).find("input").is(":checked")?l(this).addClass("checked"):l(this).removeClass("checked")}),l("form.cart").on("click","span.radiobutton",function(){l(this).find("input").is(":checked")&&(l(this).parent().parent().parent().find("span.radiobutton.checked").removeClass("checked"),l(this).addClass("checked"))}),l(".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product").each(function(){e(l(this))}),l(".yith-wapo-addon-type-checkbox, .yith-wapo-addon-type-color, .yith-wapo-addon-type-label, .yith-wapo-addon-type-product").on("change",function(){e(l(this))}),l(".yith-wapo-addon-type-number").on("change","input",function(){var e,a,t;e=l(this),a=e.data("price"),0<!(t=e.data("default-price"))&&(t=a,e.data("default-price",t)),a=e.data("price-type"),e.data("price-method"),"multiplied"==a&&e.data("price",e.val()*t)})}(jQuery);