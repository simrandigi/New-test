!function(i){i("#sortable-blocks").on("change",".active .yith-plugin-fw-onoff-container input",function(){var e={action:"enable_disable_block",block_id:i(this).attr("id").replace("yith-wapo-active-block-",""),block_vis:i(this).is(":checked")?1:0};i.post(ajaxurl,e,function(e){console.log("[YITH.LOG] - Block visibility updated")})}),i("#sortable-addons").on("change",".addon-onoff input",function(){var e={action:"enable_disable_addon",addon_id:i(this).attr("id").replace("yith-wapo-active-addon-",""),addon_vis:i(this).is(":checked")?1:0};i.post(ajaxurl,e,function(e){console.log("[YITH.LOG] - Addon visibility updated")})}),i("#sortable-blocks").sortable({helper:function(e,t){return t.children().each(function(){i(this).width(i(this).width())}),t},revert:!0,axis:"y",update:function(e,t){t={action:"sortable_blocks",moved_item:t.item.data("id"),prev_item:parseFloat(t.item.prev().data("priority")),next_item:parseFloat(t.item.next().data("priority"))};i.post(ajaxurl,t,function(e){var t=e.split("-"),e=t[0],t=parseFloat(t[1]);i("#sortable-blocks #block-"+e).attr("data-priority",t)})}}),i("#sortable-addons").sortable({revert:!0,axis:"y",update:function(e,t){t={action:"sortable_addons",moved_item:t.item.data("id"),prev_item:parseFloat(t.item.prev().data("priority")),next_item:parseFloat(t.item.next().data("priority"))};i.post(ajaxurl,t,function(e){var t=e.split("-"),e=t[0],t=parseFloat(t[1]);i("#sortable-addons #addon-"+e).attr("data-priority",t),console.log("[YITH.LOG] - New priority value: "+t)})}}),i("ul, li, tbody, tr, td").disableSelection();var e=i("#block-rules #yith-wapo-block-rule-show-in input"),t=i(".field-wrap.yith-wapo-block-rule-show-in-products"),a=i(".field-wrap.yith-wapo-block-rule-show-in-categories"),o=e.val(),n=i(".field-wrap.yith-wapo-block-rule-exclude-products"),d=i("#block-rules #yith-wapo-block-rule-exclude-products"),l=i(".field-wrap.yith-wapo-block-rule-exclude-products-products"),r=i(".field-wrap.yith-wapo-block-rule-exclude-products-categories");function s(e){e.is(":checked")?i(".enabled-by-"+e.attr("id")).fadeIn():i(".enabled-by-"+e.attr("id")).fadeOut()}e.change(function(){o=i(this).val(),"products"==i(this).val()?(t.fadeIn(),a.hide(),n.fadeOut(),"yes"==d.val()&&n.find(".yith-plugin-fw-onoff").click()):"categories"==i(this).val()?(t.hide(),a.fadeIn(),n.fadeIn(),"yes"==d.val()&&r.fadeOut()):(t.fadeOut(),a.fadeOut(),n.fadeIn(),"yes"==d.val()&&r.fadeIn())}),d.change(function(){"yes"==i(this).val()?(l.fadeIn(),"all"==o&&r.fadeIn()):(l.fadeOut(),r.fadeOut())}),i(".yith-wapo").on("change",".enabler input",function(){s(i(this))}),i(".yith-wapo .enabler input").each(function(){s(i(this))}),i(".yith-wapo").on("change","#option-separator-style",function(){"empty_space"==i(this).val()?i(".field-wrap.option-separator-color").fadeOut():i(".field-wrap.option-separator-color").fadeIn()}),i(".yith-wapo").on("change","#addon-custom-style",function(){!i(this).is(":checked")&&i("#addon-image-equal-height").is(":checked")&&i(".addon-image-equal-height .yith-plugin-fw-onoff").click()}),i("#tab-options-list").on("click",".option .title",function(){var e=i(this).parent().find(".fields");e.toggle(),e.is(":visible")?i(this).parent().removeClass("close").addClass("open"):i(this).parent().removeClass("open").addClass("close")}),i("#add-new-option").click(function(){var e=i(this).parent().find(".option").length;i(".yith-plugin-fw-upload-container button").off();e=wp.template("new-option-"+e);i("#add-new-option").before(e()),i("body").trigger("yith_fields_init")}),i("#tab-options-list").on("change",".option-price-method",function(){var e=i(this).parent().parent().parent().parent();"free"!=i(this).val()&&"product"!=i(this).val()?(e.find(".option-cost").fadeIn(),"increase"==i(this).val()?(e.find(".option-cost .option-price-method-increase").fadeIn(),e.find(".option-cost .option-price-method-decrease").fadeOut()):(e.find(".option-cost .option-price-method-increase").fadeOut(),e.find(".option-cost .option-price-method-decrease").fadeIn())):e.find(".option-cost").fadeOut()}),i("#tab-options-list").on("change",".option-selectable-dates",function(){var e=i(this).parent().parent().parent().parent();"days"==i(this).val()?(e.find(".option-selectable-days-ranges").fadeIn(),e.find(".option-selectable-date-ranges").hide()):"date"==i(this).val()?(e.find(".option-selectable-days-ranges").hide(),e.find(".option-selectable-date-ranges").fadeIn()):(e.find(".option-selectable-days-ranges").hide(),e.find(".option-selectable-date-ranges").hide())}),i("#tab-options-list").on("click",".yith-plugin-fw__action-button--delete-action",function(){i(this).parent().parent().remove()}),i("#tab-options-list").on("change",".color-show-as select",function(){var e=i(this).parent().parent().parent().parent().parent();"double"==i(this).val()?(e.find(".color").fadeIn(),e.find(".color_b").fadeIn(),e.find(".color_image").hide()):"image"==i(this).val()?(e.find(".color").hide(),e.find(".color_b").hide(),e.find(".color_image").fadeIn()):(e.find(".color").fadeIn(),e.find(".color_b").hide(),e.find(".color_image").hide())}),i("#tab-options-list").on("click",".option .title",function(){i(this).parent().find(".color-show-as select").change()}),i("#tab-options-list").find(".color-show-as select").change(),i(".yith-wapo").on("change",".option-date-default",function(){var e=i(this).parent().parent().parent().parent();"specific"==i(this).val()?(e.find(".option-date-default-day").fadeIn(),e.find(".option-date-default-interval").hide()):"interval"==i(this).val()?(e.find(".option-date-default-day").hide(),e.find(".option-date-default-interval").fadeIn()):(e.find(".option-date-default-day").fadeOut(),e.find(".option-date-default-interval").fadeOut())}),i(".add-date-rule a").click(function(){i(this).parent();var e=i(this).parent().parent().find(".rule:first-child").clone(),t=Math.floor(1e5*Math.random());return e.find("select").val("days").attr("id","new-select-"+t),e.find(".option-date-default-day").fadeIn(),e.find("input").val("").attr("id","new-input-"+t),e.find("ul li.select2-selection__choice").remove(),e.find(".delete-rule").show(),i("#add-date-rule").before(e),i("#new-input-"+t).datepicker(),!1}),i(".date-rules").on("change",".select_what",function(){var e=i(this).parent().parent().parent();e.find(".field:not(.what)").hide(),("years"==i(this).val()?e.find(".field.years"):"months"==i(this).val()?e.find(".field.months"):e.find(".field.days")).fadeIn()}),i(".date-rules").on("click",".delete-rule",function(){i(this).parent().remove()})}(jQuery);